package com.leixing.åŠ¨æ€è§„åˆ’.åºåˆ—DP;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

/**
 *ç»™ä½ ä¸€ä¸ªç”± æ— é‡å¤ æ­£æ•´æ•°ç»„æˆçš„é›†åˆ nums ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›å…¶ä¸­æœ€å¤§çš„æ•´é™¤å­é›† answer ï¼Œå­é›†ä¸­æ¯ä¸€å…ƒç´ å¯¹ (answer[i], answer[j]) éƒ½åº”å½“æ»¡è¶³ï¼š
 * answer[i] % answer[j] == 0 ï¼Œæˆ–
 * answer[j] % answer[i] == 0
 * å¦‚æœå­˜åœ¨å¤šä¸ªæœ‰æ•ˆè§£å­é›†ï¼Œè¿”å›å…¶ä¸­ä»»ä½•ä¸€ä¸ªå‡å¯ã€‚
 * ç¤ºä¾‹ 1ï¼š
 * è¾“å…¥ï¼šnums = [1,2,3]
 * è¾“å‡ºï¼š[1,2]
 * è§£é‡Šï¼š[1,3] ä¹Ÿä¼šè¢«è§†ä¸ºæ­£ç¡®ç­”æ¡ˆã€‚
 * ç¤ºä¾‹ 2ï¼š
 * è¾“å…¥ï¼šnums = [1,2,4,8]
 * è¾“å‡ºï¼š[1,2,4,8]
 * æç¤ºï¼š
 * 1 <= nums.length <= 1000
 * 1 <= nums[i] <= 2 * 109
 * nums ä¸­çš„æ‰€æœ‰æ•´æ•° äº’ä¸ç›¸åŒ
 * åŸºæœ¬åˆ†æ
 * æ ¹æ®é¢˜æ„ï¼šå¯¹äºç¬¦åˆè¦æ±‚çš„ã€Œæ•´é™¤å­é›†ã€ä¸­çš„ä»»æ„ä¸¤ä¸ªå€¼ï¼Œå¿…ç„¶æ»¡è¶³ã€Œè¾ƒå¤§æ•°ã€æ˜¯ã€Œè¾ƒå°æ•°ã€çš„å€æ•°ã€‚
 * æ•°æ®èŒƒå›´æ˜¯ 10^3
 * æˆ‘ä»¬ä¸å¯èƒ½é‡‡å–è·å–æ‰€æœ‰å­é›†ï¼Œå†æ£€æŸ¥å­é›†æ˜¯å¦åˆæ³•çš„çˆ†æœè§£æ³•ã€‚
 * é€šå¸¸ã€Œé€’å½’ã€åšä¸äº†ï¼Œæˆ‘ä»¬å°±å¾€ã€Œé€’æ¨ã€æ–¹å‘å»è€ƒè™‘ã€‚
 * ç”±äºå­˜åœ¨ã€Œæ•´é™¤å­é›†ã€ä¸­ä»»æ„ä¸¤ä¸ªå€¼å¿…ç„¶å­˜åœ¨å€æ•°/çº¦æ•°å…³ç³»çš„æ€§è´¨ï¼Œæˆ‘ä»¬è‡ªç„¶ä¼šæƒ³åˆ°å¯¹ nums è¿›è¡Œæ’åºï¼Œç„¶åä»é›†åˆ nums ä¸­ä»å¤§åˆ°å°è¿›è¡Œå–æ•°ï¼Œæ¯æ¬¡å–æ•°åªè€ƒè™‘å½“å‰å†³ç­–çš„æ•°æ˜¯å¦ä¸ã€Œæ•´é™¤å­é›†ã€ä¸­çš„æœ€åä¸€ä¸ªæ•°æˆå€æ•°å…³ç³»å³å¯ã€‚
 * è¿™æ—¶å€™ä½ å¯èƒ½ä¼šæƒ³æšä¸¾æ¯ä¸ªæ•°ä½œä¸ºã€Œæ•´é™¤å­é›†ã€çš„èµ·ç‚¹ï¼Œç„¶åä»å‰å¾€åéå†ä¸€éï¼Œæ¯æ¬¡éƒ½å°†ç¬¦åˆã€Œä¸å½“å‰å­é›†æœ€åä¸€ä¸ªå…ƒç´ æˆå€æ•°ã€å…³ç³»çš„æ•°åŠ å…¥ç­”æ¡ˆã€‚
 * ä¸¾ä¸ªğŸŒ°ï¼Œå‡è®¾æœ‰åŸæ•°ç»„ [1,2,4,8]ï¼Œâ€œæˆ–è®¸â€æˆ‘ä»¬æœŸæœ›çš„å†³ç­–è¿‡ç¨‹æ˜¯ï¼š
 * éå†åˆ°æ•°å­— 1ï¼Œæ­¤æ—¶ã€Œæ•´é™¤å­é›†ã€ä¸ºç©ºï¼ŒåŠ åˆ°ã€Œæ•´é™¤å­é›†ã€ä¸­ï¼›
 * éå†åˆ°æ•°å­— 2ï¼Œä¸ã€Œæ•´é™¤å­é›†ã€çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆ1ï¼‰æˆå€æ•°å…³ç³»ï¼ŒåŠ åˆ°ã€Œæ•´é™¤å­é›†ã€ä¸­ï¼›
 * éå†åˆ°æ•°å­— 4ï¼Œä¸ã€Œæ•´é™¤å­é›†ã€çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆ2ï¼‰æˆå€æ•°å…³ç³»ï¼Œè‡ªç„¶ä¹Ÿä¸ 2 ä¹‹å‰çš„å…ƒç´ æˆå€æ•°å…³ç³»ï¼ŒåŠ åˆ°ã€Œæ•´é™¤å­é›†ã€ä¸­ï¼›
 * éå†åˆ°æ•°å­— 8ï¼Œä¸ã€Œæ•´é™¤å­é›†ã€çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆ4ï¼‰æˆå€æ•°å…³ç³»ï¼Œè‡ªç„¶ä¹Ÿä¸ 4 ä¹‹å‰çš„å…ƒç´ æˆå€æ•°å…³ç³»ï¼ŒåŠ åˆ°ã€Œæ•´é™¤å­é›†ã€ä¸­ã€‚
 * ä½†è¿™æ ·çš„åšæ³•åªèƒ½å¤Ÿç¡®ä¿å¾—åˆ°ã€Œåˆæ³•è§£ã€ï¼Œæ— æ³•ç¡®ä¿å¾—åˆ°çš„æ˜¯ã€Œæœ€é•¿æ•´é™¤å­é›†ã€ã€‚
 * å½“æ—¶æ‹…å¿ƒæœ¬é¢˜æ•°æ®å¤ªå¼±ï¼Œä¸Šè¿°é”™è¯¯çš„è§£æ³•ä¹Ÿèƒ½å¤Ÿé€šè¿‡ï¼Œæ‰€ä»¥è¿˜ç‰¹æ„å®ç°äº†ä¸€ä¸‹ï¼Œè¿˜å¥½è¢«å¡ä½äº†ï¼ˆğŸ¤£
 * åŒæ—¶ä¹Ÿå¾—åˆ°è¿™ä¸ªåä¾‹ï¼š[9,18,54,90,108,180,360,540,720]ï¼Œå¦‚æœæŒ‰ç…§æˆ‘ä»¬ä¸Šè¿°é€»è¾‘ï¼Œæˆ‘ä»¬å¾—åˆ°çš„æ˜¯ [9,18,54,108,540] ç­”æ¡ˆï¼ˆé•¿åº¦ä¸º 5ï¼‰ï¼Œä½†äº‹å®ä¸Šå­˜åœ¨æ›´é•¿çš„ã€Œæ•´é™¤å­é›†ã€ï¼š [9,18,90,180,360,720]ï¼ˆé•¿åº¦ä¸º 6ï¼‰ã€‚
 * å…¶æœ¬è´¨æ˜¯å› ä¸ºåŒä¸€ä¸ªæ•°çš„ä¸åŒå€æ•°ä¹‹é—´ä¸å­˜åœ¨å¿…ç„¶çš„ã€Œå€æ•°/çº¦æ•°å…³ç³»ã€ï¼Œè€Œåªå­˜åœ¨ã€Œå…·æœ‰å…¬çº¦æ•°ã€çš„æ€§è´¨ï¼Œè¿™ä¼šå¯¼è‡´æˆ‘ä»¬ã€Œæ¨¡æ‹Ÿè§£æ³•ã€é”™è¿‡æœ€ä¼˜è§£ã€‚
 * æ¯”å¦‚ä¸Šè¿° ğŸŒ°ï¼Œ54 & 90 å’Œ 18 å­˜åœ¨å€æ•°å…³ç³»ï¼Œä½†ä¸¤è€…æœ¬èº«ä¸å­˜åœ¨å€æ•°å…³ç³»ã€‚
 * å› æ­¤å½“æˆ‘ä»¬å†³ç­–åˆ°æŸä¸€ä¸ªæ•° nums[i] æ—¶ï¼ˆnums å·²æ’å¥½åºï¼‰ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥å°† nums[i] ç›´æ¥æ¥åœ¨ç¬¦åˆã€Œçº¦æ•°å…³ç³»ã€çš„ã€æœ€é è¿‘ä½ç½® i çš„æ•°åé¢ï¼Œè€Œæ˜¯è¦æ£€æŸ¥ä½ç½® i å‰é¢çš„æ‰€æœ‰ç¬¦åˆã€Œçº¦æ•°å…³ç³»ã€çš„ä½ç½®ï¼Œæ‰¾ä¸€ä¸ªå·²ç»å½¢æˆã€Œæ•´é™¤å­é›†ã€é•¿åº¦æœ€å¤§çš„æ•°ã€‚
 * æ¢å¥è¯è¯´ï¼Œå½“æˆ‘ä»¬å¯¹ nums æ’å¥½åºå¹¶ä»å‰å¾€åå¤„ç†æ—¶ï¼Œåœ¨å¤„ç†åˆ° nums[i] æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›çŸ¥é“ä½ç½® i ä¹‹å‰çš„ä¸‹æ ‡å·²ç»å½¢æˆçš„ã€Œæ•´é™¤å­é›†ã€é•¿åº¦æ˜¯å¤šå°‘ï¼Œç„¶åä»ä¸­é€‰ä¸€ä¸ªæœ€é•¿çš„ã€Œæ•´é™¤å­é›†ã€ï¼Œå°† nums[i] æ¥åœ¨åé¢ï¼ˆå‰ææ˜¯ç¬¦åˆã€Œå€æ•°å…³ç³»ã€ï¼‰ã€‚
 * åŠ¨æ€è§„åˆ’
 * åŸºäºä¸Šè¿°åˆ†æï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°è¿™å…¶å®æ˜¯ä¸€ä¸ªåºåˆ— DP é—®é¢˜ï¼šæŸä¸ªçŠ¶æ€çš„è½¬ç§»ä¾èµ–äºä¸å‰ä¸€ä¸ªçŠ¶æ€çš„å…³ç³»ã€‚å³ nums[i] èƒ½å¦æ¥åœ¨ nums[j] åé¢ï¼Œå–å†³äºæ˜¯å¦æ»¡è¶³ nums[i] % nums[j] == 0 æ¡ä»¶ã€‚
 * å¯çœ‹åšæ˜¯ã€Œæœ€é•¿ä¸Šå‡å­åºåˆ—ã€é—®é¢˜çš„å˜å½¢é¢˜ã€‚
 * å®šä¹‰ f[i]ä¸ºè€ƒè™‘å‰ i ä¸ªæ•°å­—ï¼Œä¸”ä»¥ç¬¬ i ä¸ªæ•°ä¸ºç»“å°¾çš„æœ€é•¿ã€Œæ•´é™¤å­é›†ã€é•¿åº¦ã€‚
 * æˆ‘ä»¬ä¸å¤±ä¸€èˆ¬æ€§çš„è€ƒè™‘ä»»æ„ä½ç½® iï¼Œå­˜åœ¨ä¸¤ç§æƒ…å†µï¼š
 * å¦‚æœåœ¨ i ä¹‹å‰æ‰¾ä¸åˆ°ç¬¦åˆæ¡ä»¶ nums[i] % nums[j] == 0 çš„ä½ç½® jï¼Œé‚£ä¹ˆ nums[i] ä¸èƒ½æ¥åœ¨ä½ç½® i ä¹‹å‰çš„ä»»ä½•æ•°çš„åé¢ï¼Œåªèƒ½è‡ªå·±ç‹¬ç«‹ä½œä¸ºã€Œæ•´é™¤å­é›†ã€çš„ç¬¬ä¸€ä¸ªæ•°ï¼Œæ­¤æ—¶çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸º f[i] = 1ï¼›
 * å¦‚æœåœ¨ i ä¹‹å‰èƒ½å¤Ÿæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ä½ç½® jï¼Œåˆ™å–æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ f[j] çš„æœ€å¤§å€¼ï¼Œä»£è¡¨å¦‚æœå¸Œæœ›æ‰¾åˆ°ä»¥ nums[i] ä¸ºç»“å°¾çš„æœ€é•¿ã€Œæ•´é™¤å­é›†ã€ï¼Œéœ€è¦å°† nums[i] æ¥åˆ°ç¬¦åˆæ¡ä»¶çš„æœ€é•¿çš„ nums[j] åé¢ï¼Œæ­¤æ—¶çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸º f[i] = f[j] + 1ã€‚
 * åŒæ—¶ç”±äºæˆ‘ä»¬éœ€è¦è¾“å‡ºå…·ä½“æ–¹æ¡ˆï¼Œéœ€è¦é¢å¤–ä½¿ç”¨ g[] æ•°ç»„æ¥è®°å½•æ¯ä¸ªçŠ¶æ€æ˜¯ç”±å“ªä¸ªçŠ¶æ€è½¬ç§»è€Œæ¥ã€‚
 * å®šä¹‰ g[i] ä¸ºè®°å½• f[i] æ˜¯ç”±å“ªä¸ªä¸‹æ ‡çš„çŠ¶æ€è½¬ç§»è€Œæ¥ï¼Œå¦‚æœ f[i] = f[j] + 1, åˆ™æœ‰ g[i] = jã€‚
 * å¯¹äºæ±‚æ–¹æ¡ˆæ•°çš„é¢˜ç›®ï¼Œå¤šå¼€ä¸€ä¸ªæ•°ç»„æ¥è®°å½•çŠ¶æ€ä»ä½•è½¬ç§»è€Œæ¥æ˜¯æœ€å¸¸è§çš„æ‰‹æ®µã€‚
 * å½“æˆ‘ä»¬æ±‚å¾—æ‰€æœ‰çš„çŠ¶æ€å€¼ä¹‹åï¼Œå¯ä»¥å¯¹ f[] æ•°ç»„è¿›è¡Œéå†ï¼Œå–å¾—å…·ä½“çš„æœ€é•¿ã€Œæ•´é™¤å­é›†ã€é•¿åº¦å’Œå¯¹åº”ä¸‹æ ‡ï¼Œç„¶åä½¿ç”¨ g[] æ•°ç»„è¿›è¡Œå›æº¯ï¼Œå–å¾—ç­”æ¡ˆã€‚
 */
public class æœ€å¤§æ•´é™¤å­é›† {
    public List<Integer> largestDivisibleSubset(int[] nums) {
        Arrays.sort(nums);
        int n=nums.length;
        int [] f=new int[n];
        int [] g=new int[n];
        for (int i=0;i<n;i++){
            // è‡³å°‘åŒ…å«è‡ªèº«ä¸€ä¸ªæ•°ï¼Œå› æ­¤èµ·å§‹é•¿åº¦ä¸º 1ï¼Œç”±è‡ªèº«è½¬ç§»è€Œæ¥
            int len=1,prev=i;
            for (int j=0;j<i;j++){
                if (nums[i] % nums[j] == 0){
                    // å¦‚æœèƒ½æ¥åœ¨æ›´é•¿çš„åºåˆ—åé¢ï¼Œåˆ™æ›´æ–°ã€Œæœ€å¤§é•¿åº¦ã€&ã€Œä»ä½•è½¬ç§»è€Œæ¥ã€
                    if (f[j] + 1 >len){
                        len=f[j]+1;
                        prev=j;
                    }
                }
            }
            // è®°å½•ã€Œæœ€ç»ˆé•¿åº¦ã€&ã€Œä»ä½•è½¬ç§»è€Œæ¥ã€
            f[i] =len;
            g[i]=prev;
        }
        // éå†æ‰€æœ‰çš„ f[i]ï¼Œå–å¾—ã€Œæœ€å¤§é•¿åº¦ã€å’Œã€Œå¯¹åº”ä¸‹æ ‡ã€
        int max=-1,idx=-1;
        for (int i=0;i<n;i++){
            if (f[i] > max){
                idx=i;
                max=f[i];
            }
        }
        // ä½¿ç”¨ g[] æ•°ç»„å›æº¯å‡ºå…·ä½“æ–¹æ¡ˆ
        List<Integer> ans=new ArrayList<>();
        while (ans.size()!= max){
            ans.add(nums[idx]);
            idx=g[idx];
        }
        return ans;
    }
}
//æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)
//ç©ºé—´å¤æ‚åº¦ï¼šO(n)
